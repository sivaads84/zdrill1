const InitCommand = require('./init');
const Constants = require('./constants');


const MODULE_TYPE = 'module-type';

// overwrite init command config to allow named folders, e.g. database:db
const CONFIG = Object.freeze({
    modules: {
        default: ''
    }
});

class AddCommand extends InitCommand {
    constructor(logger, fsHelper) {
        super(CONFIG, logger, fsHelper);
    }

    async run(args, options, cdsEnv) {
        const modFolder = args[2] || Constants.DEFAULT_MODULE_FOLDER[options[MODULE_TYPE]];
        options.modules = `${modFolder}:${options[MODULE_TYPE]}`;

        delete options[MODULE_TYPE];

        await super.run(['.'], options, cdsEnv);
    }

}

module.exports = AddCommand;
